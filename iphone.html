<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Tank Controller</title>
<style>
body { background:#111; color:#fff; text-align:center; font-family:sans-serif; }
button { font-size:20px; margin:10px; padding:20px; }
</style>
</head>
<body>

<h2>Tank Controller</h2>

<div>
  <button onclick="move(0,-1)">▲</button><br>
  <button onclick="move(-1,0)">◀</button>
  <button onclick="move(1,0)">▶<br>
  <button onclick="move(0,1)">▼</button>
</div>

<button onclick="fire()">FIRE</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  databaseURL: "YOUR_DB_URL",
  projectId: "YOUR_PROJECT_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const ROOM_ID = "room_1";
const PLAYER_ID = prompt("player id? (playerAなど)");

let angle = 0;

window.move = (x,y) => {
  set(ref(db, `rooms/${ROOM_ID}/inputs/${PLAYER_ID}`), {
    moveX: x,
    moveY: y,
    angle: angle,
    fire: false
  });
};

window.fire = () => {
  set(ref(db, `rooms/${ROOM_ID}/inputs/${PLAYER_ID}`), {
    moveX: 0,
    moveY: 0,
    angle: angle,
    fire: true
  });
};
</script>

</body>
</html>
